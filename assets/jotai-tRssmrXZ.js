import{r as P,R as ne,j as b,c as oe,d as re}from"./index-dU5Uz-wX.js";import{g as ce,S as ie,C as ue,N as le,a as ae,G as de,b as fe,E as he,c as ve,V as be,d as me,e as pe}from"./index-BKi-f4Le.js";var g={BASE_URL:"/react-state-managers",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let we=0;function N(e,n){const s=`atom${++we}`,a={toString:()=>s};return typeof e=="function"?a.read=e:(a.init=e,a.read=Se,a.write=_e),a}function Se(e){return e(this)}function _e(e,n,s){return n(this,typeof s=="function"?s(e(this)):s)}const B=(e,n)=>e.unstable_is?e.unstable_is(n):n===e,I=e=>"init"in e,U=e=>!!e.write,M=Symbol((g?"production":void 0)!=="production"?"CONTINUE_PROMISE":""),L="pending",Ce="fulfilled",Ee="rejected",ge=e=>typeof e=="object"&&e!==null&&M in e,k=new WeakMap,je=(e,n,s)=>{if(!k.has(e)){let a;const h=new Promise((w,j)=>{let C=e;const T=m=>E=>{C===m&&(h.status=Ce,h.value=E,w(E),s())},_=m=>E=>{C===m&&(h.status=Ee,h.reason=E,j(E),s())};e.then(T(e),_(e)),a=(m,E)=>{m&&(k.set(m,h),C=m,m.then(T(m),_(m)),n(),n=E)}});h.status=L,h[M]=a,k.set(e,h)}return k.get(e)},Ae=e=>typeof(e==null?void 0:e.then)=="function",$=e=>"v"in e||"e"in e,F=e=>{if("e"in e)throw e.e;if((g?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},J=e=>{const n=e.v;return ge(n)&&n.status===L?n:null},q=(e,n,s)=>{s.p.has(e)||(s.p.add(e),n.then(()=>{s.p.delete(e)},()=>{s.p.delete(e)}))},V=()=>[new Map,new Map,new Set],G=(e,n,s)=>{e[0].has(n)||e[0].set(n,new Set),e[1].set(n,s)},Ne=(e,n,s)=>{const a=e[0].get(n);a&&a.add(s)},Te=(e,n)=>e[0].get(n),H=(e,n)=>{e[2].add(n)},x=e=>{for(;e[1].size||e[2].size;){e[0].clear();const n=new Set(e[1].values());e[1].clear();const s=new Set(e[2]);e[2].clear(),n.forEach(a=>{var h;return(h=a.m)==null?void 0:h.l.forEach(w=>w())}),s.forEach(a=>a())}},xe=()=>{const e=new WeakMap;let n;(g?"production":void 0)!=="production"&&(n=new Set);const s=c=>{let t=e.get(c);return t||(t={d:new Map,p:new Set,n:0},e.set(c,t)),t},a=(c,t,r,o=()=>{},u=()=>{})=>{const d="v"in t,l=t.v,p=J(t);if(Ae(r))if(p)p!==r&&(p[M](r,o),++t.n);else{const f=je(r,o,u);if(f.status===L)for(const i of t.d.keys()){const v=s(i);q(c,f,v)}t.v=f,delete t.e}else p&&p[M](Promise.resolve(r),o),t.v=r,delete t.e;(!d||!Object.is(l,t.v))&&++t.n},h=(c,t,r,o)=>{var u;if((g?"production":void 0)!=="production"&&r===t)throw new Error("[Bug] atom cannot depend on itself");const d=s(t);d.d.set(r,o.n);const l=J(d);l&&q(t,l,o),(u=o.m)==null||u.t.add(t),c&&Ne(c,r,t)},w=(c,t,r)=>{const o=s(t);if(!(r!=null&&r(t))&&$(o)&&(o.m||Array.from(o.d).every(([i,v])=>w(c,i,r).n===v)))return o;o.d.clear();let u=!0;const d=i=>{if(B(t,i)){const S=s(i);if(!$(S))if(I(i))a(i,S,i.init);else throw new Error("no atom init");return F(S)}const v=w(c,i,r);if(u)h(c,t,i,v);else{const S=V();h(S,t,i,v),m(S,t,o),x(S)}return F(v)};let l,p;const f={get signal(){return l||(l=new AbortController),l.signal},get setSelf(){return(g?"production":void 0)!=="production"&&!U(t)&&console.warn("setSelf function cannot be used with read-only atom"),!p&&U(t)&&(p=(...i)=>{if((g?"production":void 0)!=="production"&&u&&console.warn("setSelf function cannot be called in sync"),!u)return _(t,...i)}),p}};try{const i=t.read(d,f);return a(t,o,i,()=>l==null?void 0:l.abort(),()=>{if(o.m){const v=V();m(v,t,o),x(v)}}),o}catch(i){return delete o.v,o.e=i,++o.n,o}finally{u=!1}},j=c=>F(w(void 0,c)),C=(c,t)=>{const r=f=>{var i,v;const S=s(f),A=new Set((i=S.m)==null?void 0:i.t);for(const y of S.p)A.add(y);return(v=Te(c,f))==null||v.forEach(y=>{A.add(y)}),A},o=[],u=new Set,d=f=>{if(!u.has(f)){u.add(f);for(const i of r(f))f!==i&&d(i);o.push(f)}};d(t);const l=new Set([t]),p=f=>u.has(f);for(let f=o.length-1;f>=0;--f){const i=o[f],v=s(i),S=v.n;let A=!1;for(const y of v.d.keys())if(y!==i&&l.has(y)){A=!0;break}A&&(w(c,i,p),m(c,i,v),S!==v.n&&(G(c,i,v),l.add(i))),u.delete(i)}},T=(c,t,...r)=>{const o=l=>F(w(c,l)),u=(l,...p)=>{let f;if(B(t,l)){if(!I(l))throw new Error("atom not writable");const i=s(l),v="v"in i,S=i.v,A=p[0];a(l,i,A),m(c,l,i),(!v||!Object.is(S,i.v))&&(G(c,l,i),C(c,l))}else f=T(c,l,...p);return x(c),f};return t.write(o,u,...r)},_=(c,...t)=>{const r=V(),o=T(r,c,...t);return x(r),o},m=(c,t,r)=>{if(r.m&&!J(r)){for(const o of r.d.keys())r.m.d.has(o)||(E(c,o).t.add(t),r.m.d.add(o));for(const o of r.m.d||[])if(!r.d.has(o)){const u=O(c,o);u==null||u.t.delete(t),r.m.d.delete(o)}}},E=(c,t)=>{const r=s(t);if(!r.m){w(c,t);for(const o of r.d.keys())E(c,o).t.add(t);if(r.m={l:new Set,d:new Set(r.d.keys()),t:new Set},(g?"production":void 0)!=="production"&&n.add(t),U(t)&&t.onMount){const o=r.m,{onMount:u}=t;H(c,()=>{const d=u((...l)=>T(c,t,...l));d&&(o.u=d)})}}return r.m},O=(c,t)=>{const r=s(t);if(r.m&&!r.m.l.size&&!Array.from(r.m.t).some(o=>s(o).m)){const o=r.m.u;o&&H(c,o),delete r.m,(g?"production":void 0)!=="production"&&n.delete(t);for(const d of r.d.keys()){const l=O(c,d);l==null||l.t.delete(t)}const u=J(r);u&&u[M](void 0,()=>{});return}return r.m},z=(c,t)=>{const r=V(),o=E(r,c);x(r);const u=o.l;return u.add(t),()=>{u.delete(t);const d=V();O(d,c),x(d)}};return(g?"production":void 0)!=="production"?{get:j,set:_,sub:z,dev4_get_internal_weak_map:()=>e,dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:t=>{const r=V();for(const[o,u]of t)if(I(o)){const d=s(o),l="v"in d,p=d.v;a(o,d,u),m(r,o,d),(!l||!Object.is(p,d.v))&&(G(r,o,d),C(r,o))}x(r)}}:{get:j,set:_,sub:z}};let R;const ye=()=>(R||(R=xe(),(g?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=R),globalThis.__JOTAI_DEFAULT_STORE__!==R&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),R);var Ve={BASE_URL:"/react-state-managers",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Pe=P.createContext(void 0),K=e=>P.useContext(Pe)||ye(),De=e=>typeof(e==null?void 0:e.then)=="function",Re=ne.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(n=>{e.status="fulfilled",e.value=n},n=>{e.status="rejected",e.reason=n}),e)});function W(e,n){const s=K(),[[a,h,w],j]=P.useReducer(_=>{const m=s.get(e);return Object.is(_[0],m)&&_[1]===s&&_[2]===e?_:[m,s,e]},void 0,()=>[s.get(e),s,e]);let C=a;return(h!==s||w!==e)&&(j(),C=s.get(e)),P.useEffect(()=>{const _=s.sub(e,()=>{j()});return j(),_},[s,e,void 0]),P.useDebugValue(C),De(C)?Re(C):C}function Me(e,n){const s=K();return P.useCallback((...h)=>{if((Ve?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return s.set(e,...h)},[s,e])}function D(e,n){return[W(e),Me(e)]}const Q=N([]),X=()=>D(Q),ke=N("desktop"),Y=()=>D(ke),Z=N(0),Fe=()=>D(Z),ee=N(""),Je=()=>D(ee),te=N(0),Oe=()=>D(te),se=N(0),Ie=()=>D(se),Ue=N(e=>({tableColumnFilters:e(Q),counter:e(Z),sliderValue:e(te),timer:e(se)})),Ge=()=>W(Ue),Le=N(e=>ce(e(ee))),We=()=>W(Le),ze=e=>{const[n,s]=Ie();return b.jsx(ie,{className:e.className,timer:n,setTimer:s})},Be=e=>{const[n,s]=Fe();return b.jsx(ue,{className:e.className,counter:n,setCounter:s,children:b.jsx(ze,{})})},$e=e=>{const[n,s]=Oe();return b.jsx(le,{className:e.className,value:n,setValue:s,children:b.jsx(Be,{})})},qe=()=>{const[e,n]=Y();return b.jsx(ae,{chartTab:e,setChartTab:n})},He=e=>{const[n,s]=Je();return b.jsx(de,{className:e.className,value:n,setValue:s,children:b.jsx(qe,{})})},Ke=e=>{var a;const[n,s]=X();return b.jsxs(fe,{className:e.className,value:(a=n[0])==null?void 0:a.value,onChange:h=>s([{id:"email",value:h}]),children:[b.jsx($e,{}),b.jsx(He,{})]})},Qe=e=>{const[n,s]=X();return b.jsx(he,{className:e.className,tableColumnFilters:n,setTableColumnFilters:s})},Xe=e=>{const[n,s]=Y();return b.jsx(ve,{className:e.className,chartTab:n,setChartTab:s,children:b.jsx(Qe,{})})},Ye=e=>{var w;const{tableColumnFilters:n,sliderValue:s,counter:a,timer:h}=Ge();return b.jsx(be,{className:e.className,sliderValue:s,searchText:(w=n[0])==null?void 0:w.value,counter:a,timer:h})},Ze=e=>{const n=We();return b.jsx(me,{className:e.className,user:n})},st=()=>b.jsxs(pe,{className:oe("m-4 grid grid-cols-10 gap-2 p-2 shadow-sm",re[0]),children:[b.jsx(Ke,{className:"col-span-3"}),b.jsx(Xe,{className:"col-span-7"}),b.jsx(Ye,{className:"col-span-5"}),b.jsx(Ze,{className:"col-span-5"})]});export{st as JotaiPage};
